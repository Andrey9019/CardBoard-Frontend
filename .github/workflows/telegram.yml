name: Notify on Main Update

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
    types: [closed]

jobs:
  notify-on-push:
    if: github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
      - name: Notify on push to main
        run: |
          curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d "text=ğŸš€ ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ° Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ° Ğ³Ñ–Ğ»ĞºĞ°!%0A%0AğŸ’» Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ğ¹: Front ${{ github.repository }}%0A%0AğŸ“© ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ: ${{ github.event.head_commit.message }}%0A%0AğŸ”„ git checkout main && git pull origin main"

  notify-on-pr-close:
    if: github.event_name == 'pull_request' && github.event.action == 'closed'
    runs-on: ubuntu-latest
    steps:
      - name: Notify PR was closed
        run: |
          curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d "text=ğŸš€ ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ° Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ° Ğ³Ñ–Ğ»ĞºĞ°!%0A%0AğŸ’» Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ğ¹: Front ${{ github.repository }}%0A%0AğŸ“© ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ: ${{ github.event.head_commit.message }}%0A%0AğŸ”„ git checkout main && git pull origin main"
